(function(t){function e(e){for(var i,o,r=e[0],l=e[1],c=e[2],p=0,d=[];p<r.length;p++)o=r[p],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,r=1;r<n.length;r++){var l=n[r];0!==s[l]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},s={app:0},a=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"0574":function(t,e,n){},"0d7c":function(t,e,n){"use strict";n("e38b")},"0e97":function(t,e,n){"use strict";n("5cae")},"0ef5":function(t,e,n){},"108c":function(t,e,n){"use strict";n("9df4")},"108f":function(t,e,n){"use strict";n("bcc5")},1245:function(t,e,n){},"156b":function(t,e,n){"use strict";n("0574")},"20b6":function(t,e,n){"use strict";n("b673")},2331:function(t,e,n){"use strict";n("ba8e")},"23c3":function(t,e,n){"use strict";n("64fc")},"2a12":function(t,e,n){"use strict";n("0ef5")},3436:function(t,e,n){"use strict";n("eaf0")},3476:function(t,e,n){},3522:function(t,e,n){"use strict";n("937d")},4021:function(t,e,n){"use strict";n("b576")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"5cae":function(t,e,n){},"64fc":function(t,e,n){},7118:function(t,e,n){"use strict";n("989f")},"7b5d":function(t,e,n){"use strict";n("1245")},"87f8":function(t,e,n){"use strict";n("c8ed")},"937d":function(t,e,n){},"989f":function(t,e,n){},"9c0c":function(t,e,n){},"9df4":function(t,e,n){},"9e5b":function(t,e,n){},a05c:function(t,e,n){"use strict";n("da7e")},a74e:function(t,e,n){"use strict";n("d0ad")},a985:function(t,e,n){},b576:function(t,e,n){},b673:function(t,e,n){},ba8e:function(t,e,n){},bcc5:function(t,e,n){},bdf2:function(t,e,n){"use strict";n("e338")},c8ed:function(t,e,n){},caa4:function(t,e,n){"use strict";n("a985")},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.showHeader?n("Header"):t._e(),n("router-view")],1)},a=[],o=(n("caad"),n("b0c0"),n("2532"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"root"}},[n("div",{staticClass:"section panel-horizontal scroll"},[n("Button",{attrs:{icon:"arrow_back"},nativeOn:{click:function(e){return t.navigate("Home")}}}),t._l(t.menus,(function(e){var i=e[0],s=e[1];return n("Button",{key:s,class:{highlight:t.$route.name===i},attrs:{icon:s,text:i},nativeOn:{click:function(e){return t.navigate(i)}}})}))],2)])}),r=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:{highlight:t.bool},on:{click:t.toggle}},[t.icon?n("p",{staticClass:"icon"},[t._v(t._s(t.icon))]):t._e(),t.text?n("p",[t._v(t._s(t.text))]):t._e()])},c=[],u={name:"Button",props:["icon","text","bool"],model:{prop:"bool",event:"toggle"},methods:{toggle:function(){this.$emit("toggle",!this.bool)}}},p=u,d=n("2877"),h=Object(d["a"])(p,l,c,!1,null,null,null),f=h.exports,v={name:"Header",components:{Button:f},data:function(){return{menus:[["Phonology","audiotrack"],["Converter","sync_alt"],["Phrasebook","book"]]}},methods:{navigate:function(t){this.$route.name!==t&&this.$router.push({name:t,params:{lang:this.$route.params.lang}})}}},m=v,g=(n("dc87"),Object(d["a"])(m,o,r,!1,null,"ef45505a",null)),x=g.exports,b=i["a"].extend({name:"App",components:{Header:x},computed:{showHeader:function(){return"Home"!=this.$route.name&&!this.$route.path.includes("/editor/")}},watch:{"$route.path":{handler:function(){this.$route.name&&(localStorage.url=this.$route.path)}}},created:function(){if(this.$store.dispatch("initialize"),this.$route.name&&"Home"!=this.$route.name||this.$router.push(localStorage.url&&localStorage.url!=this.$route.path?{path:localStorage.url}:{name:"Home"}),"Home"!=this.$route.name){var t=JSON.parse(localStorage.lects);t&&this.$store.dispatch("loadLects",t)}}}),y=b,_=(n("5c0b"),Object(d["a"])(y,s,a,!1,null,null,null)),C=_.exports,k=n("8c4f"),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"section panel-sparse"},[n("div",{staticClass:"panel-horizontal-dense wrap small card"},[n("router-link",{attrs:{to:"/home"}},[t._v("Home")]),n("p",{staticClass:"text-dot"}),n("router-link",{attrs:{to:"/editor/phonology"}},[t._v("Phonology")]),n("router-link",{attrs:{to:"/editor/converter"}},[t._v("Converter")]),n("router-link",{attrs:{to:"/editor/phrasebook"}},[t._v("Phrasebook")]),n("Button",{attrs:{text:"load from lect"},nativeOn:{click:function(e){return t.loadFromLect(e)}}}),n("Button",{attrs:{text:"load from JSON"},nativeOn:{click:function(e){return t.loadFromJson(e)}}}),n("Button",{attrs:{text:"save JSON to clipboard"},nativeOn:{click:function(e){return t.saveToJson(e)}}}),n("Button",{attrs:{text:"reset"},nativeOn:{click:function(e){return t.reset(e)}}})],1),n("div",{staticClass:"grid"},[n("div",{staticClass:"panel scroll"},[n("div",{staticClass:"panel"},[t.file?[n("div",{staticClass:"panel-horizontal-dense small"},[n("h2",{staticClass:"flex"},[t._v("Phonemes")]),n("Button",{attrs:{icon:"add"},nativeOn:{click:function(e){return t.addPhoneme(e)}}})],1),n("div",{staticClass:"table panel-horizontal-dense wrap"},t._l(t.file,(function(e,i){return n("PhoneticItem",{key:i,attrs:{selected:t.phoneme==e,ipa:e.phoneme,str:t.graphemes[i]},nativeOn:{click:function(n){t.phoneme=e}}})})),1)]:t._e()],2)]),t.phoneme?n("div",{staticClass:"panel-sparse small"},[n("div",{staticClass:"panel-horizontal-dense"},[n("h2",[t._v("Phoneme")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneme.phoneme,expression:"phoneme.phoneme"}],staticClass:"flex",attrs:{type:"text",placeholder:"phoneme"},domProps:{value:t.phoneme.phoneme},on:{input:function(e){e.target.composing||t.$set(t.phoneme,"phoneme",e.target.value)}}}),n("Button",{attrs:{icon:"delete"},nativeOn:{click:function(e){return t.deletePhoneme(e)}}})],1),n("div",{staticClass:"panel-dense"},[n("div",{staticClass:"panel-horizontal-dense"},[n("h2",{staticClass:"flex"},[t._v("Notes")]),n("Button",{attrs:{icon:"add"},nativeOn:{click:function(e){return t.addItem("notes","")}}})],1),n("p",{staticClass:"text-caption text-faded"},[t._v(" You can add notes to clarify certain use cases or to give some additional info. ")]),t._l(t.phoneme.notes,(function(e,i){return n("div",{key:i,staticClass:"panel-horizontal-dense"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneme.notes[i],expression:"phoneme.notes[i]"}],staticClass:"flex",attrs:{type:"text"},domProps:{value:t.phoneme.notes[i]},on:{input:function(e){e.target.composing||t.$set(t.phoneme.notes,i,e.target.value)}}}),n("Button",{attrs:{icon:"delete"},nativeOn:{click:function(e){return t.deleteItem(i,"notes")}}})],1)}))],2),n("div",{staticClass:"panel-dense"},[n("div",{staticClass:"panel-horizontal-dense"},[n("h2",{staticClass:"flex"},[t._v("Samples")]),n("Button",{attrs:{icon:"add"},nativeOn:{click:function(e){return t.addItem("samples",{})}}})],1),n("p",{staticClass:"text-caption text-faded"},[t._v(" Use cases of the phoneme within the language, defined by a letter, a word, and the word's ipa. ")]),t._l(t.phoneme.samples,(function(e,i){return n("div",{key:i,staticClass:"panel-horizontal-dense sample"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.grapheme,expression:"s.grapheme"}],attrs:{type:"text",placeholder:"grapheme"},domProps:{value:e.grapheme},on:{input:function(n){n.target.composing||t.$set(e,"grapheme",n.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.word,expression:"s.word"}],staticClass:"flex",attrs:{type:"text",placeholder:"word"},domProps:{value:e.word},on:{input:function(n){n.target.composing||t.$set(e,"word",n.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.ipa,expression:"s.ipa"}],staticClass:"flex",attrs:{type:"text",placeholder:"ipa"},domProps:{value:e.ipa},on:{input:function(n){n.target.composing||t.$set(e,"ipa",n.target.value)}}}),n("Button",{attrs:{icon:"delete"},nativeOn:{click:function(e){return t.deleteItem(i,"samples")}}})],1)}))],2)]):t._e()])])},O=[],P=(n("c975"),n("d81d"),n("a434"),n("d3b7"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"panel-solid",class:{"text-faded":t.faded,highlight:t.selected}},[n("b",[t._v(t._s(t.str))]),n("span",{staticClass:"text-ipa"},[t._v(t._s(t.ipa))])])}),$=[],S={name:"PhoneticItem",props:["selected","faded","ipa","str"]},B=S,j=(n("23c3"),Object(d["a"])(B,P,$,!1,null,"13fa2e36",null)),z=j.exports,N={name:"PhonologyEditor",components:{Button:f,PhoneticItem:z},data:function(){return{file:[],phoneme:null}},computed:{graphemes:function(){return this.file.map((function(t){var e,n;return null===t||void 0===t||null===(e=t.samples)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.grapheme}))},notes:function(){var t,e;return null!==(t=null===(e=this.phoneme)||void 0===e?void 0:e.notes)&&void 0!==t?t:[]}},mounted:function(){try{var t=JSON.parse(localStorage.pEditor);return void(t&&(this.file=t))}catch(e){console.log(e)}this.reset()},updated:function(){localStorage.pEditor=JSON.stringify(this.file)},methods:{addPhoneme:function(){var t={phoneme:"new"};this.file.push(t),this.phoneme=t},deletePhoneme:function(){var t=this.file.indexOf(this.phoneme);this.file.splice(t,1),this.phoneme=this.file[this.file.length-1]},addItem:function(t,e){this.phoneme[t]||(this.phoneme[t]=[]),this.phoneme[t].push(e),this.$forceUpdate()},deleteItem:function(t,e){this.phoneme[e].splice(t,1),0==this.phoneme[e].length&&delete this.phoneme[e],this.$forceUpdate()},loadFromLect:function(){var t=this;fetch(this.$store.state.root+window.prompt("Enter lect name")+"/phonology.json").then((function(t){return t.json()})).then((function(e){e&&(t.file=e)}))},loadFromJson:function(){var t=JSON.parse(window.prompt("Enter JSON"));t&&(this.file=t)},saveToJson:function(){navigator.clipboard.writeText(JSON.stringify(this.file))},reset:function(){this.file=[],this.phoneme=null}}},M=N,E=(n("bdf2"),Object(d["a"])(M,w,O,!1,null,"548cd770",null)),T=E.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"section panel-sparse small"},[n("div",{staticClass:"panel-horizontal-dense wrap card"},[n("router-link",{attrs:{to:"/home"}},[t._v("Home")]),n("p",{staticClass:"text-dot"}),n("router-link",{attrs:{to:"/editor/phonology"}},[t._v("Phonology")]),n("router-link",{attrs:{to:"/editor/converter"}},[t._v("Converter")]),n("router-link",{attrs:{to:"/editor/phrasebook"}},[t._v("Phrasebook")]),n("Button",{attrs:{text:"load from lect"},nativeOn:{click:function(e){return t.loadFromLect(e)}}}),n("Button",{attrs:{text:"load from JSON"},nativeOn:{click:function(e){return t.loadFromJson(e)}}}),n("Button",{attrs:{text:"save JSON to clipboard"},nativeOn:{click:function(e){return t.saveToJson(e)}}}),n("Button",{attrs:{text:"reset"},nativeOn:{click:function(e){return t.reset(e)}}})],1),n("div",{staticClass:"grid small"},[t.file?n("div",{staticClass:"panel-sparse"},[n("div",{staticClass:"panel-dense"},[n("div",{staticClass:"panel-horizontal-dense"},[n("h2",{staticClass:"flex"},[t._v("Mappings")]),n("Button",{attrs:{icon:"add"},nativeOn:{click:function(e){return t.addMapping(e)}}})],1),n("List",{attrs:{value:t.mapping,items:t.mappings,display:"name"},on:{"update:value":function(e){t.mapping=e}}})],1),t.file?[n("div",{staticClass:"panel-dense"},[n("h2",[t._v("Sample text")]),n("p",{staticClass:"text-caption text-faded"},[t._v(" Text that will be displayed to demonstrate the conversion. ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.file.sample,expression:"file.sample"}],domProps:{value:t.file.sample},on:{input:function(e){e.target.composing||t.$set(t.file,"sample",e.target.value)}}})]),n("div",{staticClass:"panel-dense"},[n("h2",[t._v("Default conversion")]),n("p",{staticClass:"text-caption text-faded"},[t._v(" Two mappings that will be set by default. The left should be set to the sample's original writing system. ")]),t.defaultConversion?n("div",{staticClass:"panel-horizontal-dense"},[n("p",{staticClass:"icon"},[t._v("south")]),n("div",{staticClass:"panel-dense flex"},[n("Select",{attrs:{value:t.defaultConversion[0],items:t.mappings,display:"name",indexed:"true"},on:{"update:value":function(e){return t.$set(t.defaultConversion,0,e)}}}),n("Select",{attrs:{value:t.defaultConversion[1],items:t.mappings,display:"name",indexed:"true"},on:{"update:value":function(e){return t.$set(t.defaultConversion,1,e)}}})],1)]):t._e()])]:t._e()],2):t._e(),t.mapping?n("div",{staticClass:"panel-sparse"},[n("div",{staticClass:"panel-dense"},[n("div",{staticClass:"panel-horizontal-dense"},[n("h2",{staticClass:"flex"},[t._v("Name")]),n("Button",{attrs:{icon:"delete"},nativeOn:{click:function(e){return t.deleteMapping(e)}}})],1),n("p",{staticClass:"text-caption text-faded"},[t._v(" Select 'partial' if there are two or more mapping pairs that result in the same text. I.e. th-ð & th-θ. ")]),n("div",{staticClass:"panel-horizontal-dense"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.mapping.name,expression:"mapping.name"}],staticClass:"flex",attrs:{type:"text"},domProps:{value:t.mapping.name},on:{input:function(e){e.target.composing||t.$set(t.mapping,"name",e.target.value)}}}),n("Button",{attrs:{icon:"sync_disabled",text:"Partial"},model:{value:t.mapping.partial,callback:function(e){t.$set(t.mapping,"partial",e)},expression:"mapping.partial"}})],1)]),n("div",{staticClass:"panel-dense"},[n("div",{staticClass:"panel-horizontal-dense"},[n("h2",{staticClass:"flex"},[t._v("Pairs")]),n("Button",{attrs:{icon:"add"},nativeOn:{click:function(e){return t.addPair(t.pairs.length)}}})],1),n("p",{staticClass:"text-caption text-faded"},[t._v(" During conversion system will consuquently go over these pairs, replacing text from the left with the text from the right or vise versa (right with left) if conversion is reversed. ")]),t._l(t.pairs,(function(e,i){return n("div",{key:i,staticClass:"panel-horizontal-dense"},[n("Button",{attrs:{icon:"vertical_align_top"},nativeOn:{click:function(e){return t.addPair(i)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e[0],expression:"p[0]"}],staticClass:"flex",attrs:{type:"text",placeholder:"from"},domProps:{value:e[0]},on:{input:function(n){n.target.composing||t.$set(e,0,n.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e[1],expression:"p[1]"}],staticClass:"flex",attrs:{type:"text",placeholder:"to"},domProps:{value:e[1]},on:{input:function(n){n.target.composing||t.$set(e,1,n.target.value)}}}),n("Button",{attrs:{icon:"clear"},nativeOn:{click:function(e){return t.deletePair(i)}}})],1)}))],2)]):t._e()])])},J=[],q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("select",{directives:[{name:"model",rawName:"v-model",value:t.index,expression:"index"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.index=e.target.multiple?n:n[0]}}},t._l(t.text,(function(e,i){return n("option",{key:i,domProps:{value:i}},[t._v(t._s(e))])})),0)},I=[],Q=(n("ddb0"),{name:"Select",props:["value","items","display","indexed"],data:function(){return{index:0}},computed:{text:function(){var t=this;return this.display?this.items.map((function(e){return e[t.display]})):this.items},values:function(){return this.indexed?this.items.map((function(t,e){return e})):this.items}},watch:{value:{handler:function(t){var e,n,i=null!==(e=null===(n=this.values)||void 0===n?void 0:n.indexOf(t))&&void 0!==e?e:0;this.index=i<0?0:i},immediate:!0},index:{handler:function(t){this.$emit("update:value",this.values[t])},immediate:!0}}}),H=Q,A=Object(d["a"])(H,q,I,!1,null,null,null),R=A.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel-solid"},t._l(t.values,(function(e,i){return n("Button",{key:i,class:{highlight:t.value==e},attrs:{text:t.text[i]},nativeOn:{click:function(n){return t.select(e)}}})})),1)},F=[],K=n("0122"),Y={name:"List",components:{Button:f},props:["value","items","indexed","display"],computed:{text:function(){var t=this;return this.display?"object"==Object(K["a"])(this.display)?this.display:this.items.map((function(e){return e[t.display]})):this.items},values:function(){return this.indexed?this.items.map((function(t,e){return e})):this.items}},watch:{items:{handler:function(){this.items&&!this.value&&this.select(this.values[0])},immediate:!0}},methods:{select:function(t){this.$emit("update:value",t)}}},D=Y,Z=Object(d["a"])(D,U,F,!1,null,null,null),W=Z.exports,G={name:"ConverterEditor",components:{Button:f,Select:R,List:W},data:function(){return{file:[],mapping:void 0}},computed:{mappings:function(){var t,e;return null!==(t=null===(e=this.file)||void 0===e?void 0:e.mappings)&&void 0!==t?t:[]},defaultConversion:function(){return this.file.default},pairs:function(){var t,e;return null!==(t=null===(e=this.mapping)||void 0===e?void 0:e.pairs)&&void 0!==t?t:[]}},mounted:function(){try{var t=JSON.parse(localStorage.cEditor);return void(t&&(this.file=t))}catch(e){console.log(e)}this.reset()},updated:function(){localStorage.cEditor=JSON.stringify(this.file)},methods:{addMapping:function(){this.mapping={name:"newMapping",pairs:[]},this.mappings.push(this.mapping)},deleteMapping:function(){this.mappings.splice(this.mappings.indexOf(this.mapping),1),this.mapping=this.mappings[this.mappings.length-1]},addPair:function(t){this.mapping.pairs.splice(t,0,["",""])},deletePair:function(t){this.mapping.pairs.splice(t,1)},loadFromLect:function(){var t=this;fetch(this.$store.state.root+window.prompt("Enter lect name")+"/converter.json").then((function(t){return t.json()})).then((function(e){e&&(t.file=e)}))},loadFromJson:function(){var t=JSON.parse(window.prompt("Enter JSON"));t&&(this.file=t)},saveToJson:function(){navigator.clipboard.writeText(JSON.stringify(this.file))},reset:function(){this.file={default:[0,0],mappings:[]}}}},V=G,X=(n("2a12"),Object(d["a"])(V,L,J,!1,null,"3841b30f",null)),tt=X.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"section panel-sparse small"},[n("div",{staticClass:"panel-horizontal-dense wrap card",attrs:{id:"header"}},[n("router-link",{attrs:{to:"/home"}},[t._v("Home")]),n("p",{staticClass:"text-dot"}),n("router-link",{attrs:{to:"/editor/phonology"}},[t._v("Phonology")]),n("router-link",{attrs:{to:"/editor/converter"}},[t._v("Converter")]),n("router-link",{attrs:{to:"/editor/phrasebook"}},[t._v("Phrasebook")]),n("Button",{attrs:{text:"load from lect"},nativeOn:{click:function(e){return t.loadFromLect(e)}}}),n("Button",{attrs:{text:"load from JSON"},nativeOn:{click:function(e){return t.loadFromJson(e)}}}),n("Button",{attrs:{text:"save JSON to clipboard"},nativeOn:{click:function(e){return t.saveToJson(e)}}}),n("Button",{attrs:{text:"reset"},nativeOn:{click:function(e){return t.reset(e)}}})],1),t.phrasebook?n("div",{staticClass:"grid small"},[n("div",{staticClass:"panel-sparse"},[n("div",{staticClass:"panel wrap card"},[n("div",{staticClass:"panel-horizontal"},[n("h2",[t._v("Source")]),n("Select",{staticClass:"flex",attrs:{value:t.selected,items:t.phrasebook,display:"preview",indexed:!0},on:{"update:value":function(e){t.selected=e}}})],1),n("div",{staticClass:"panel-horizontal-dense wrap"},t._l(t.phrase.blocks,(function(e,i){return n("PhraseBlock",{key:i,attrs:{id:t.selected,context:t.context,interactive:!0,requirements:e.requirements,states:e.states},on:{"update:context":function(e){t.context=e}}})})),1),n("PhraseContext",{attrs:{context:t.context}})],1),n("div",{staticClass:"panel wrap card"},[n("div",{staticClass:"panel-horizontal-dense"},[n("h2",{staticClass:"flex"},[t._v("Translation")]),n("Button",{class:{highlight:"Notes"==t.conditionsProperty},attrs:{icon:"sticky_note_2",text:"Notes"},nativeOn:{click:function(e){return t.editNotes(e)}}}),n("Button",{class:{highlight:"Localized context"==t.conditionsProperty},attrs:{icon:"format_list_bulleted",text:"Context"},nativeOn:{click:function(e){return t.editLocalizedContext(e)}}})],1),n("div",{staticClass:"panel-horizontal wrap"},[t._l(t.blocks,(function(e,i){return n("div",{key:i,staticClass:"panel-horizontal-solid"},[n("PhraseBlock",{attrs:{id:t.selected,context:t.context,interactive:!0,requirements:e.requirements,states:e.states},on:{"update:context":function(e){t.context=e}}}),n("Button",{class:{highlight:t.block==e},attrs:{icon:"edit"},nativeOn:{click:function(n){t.block=e}}})],1)})),n("Button",{attrs:{icon:"add"},nativeOn:{click:function(e){return t.addBlock(e)}}})],2),t.translation.context?n("PhraseContext",{attrs:{context:t.context,translation:t.translation.context}}):t._e()],1),t.conditionsProperty&&t.conditions?n("div",{staticClass:"panel-dense"},[n("div",{staticClass:"panel-horizontal-dense"},[n("h2",{staticClass:"flex"},[t._v(t._s(t.conditionsProperty))]),n("Button",{attrs:{icon:"add"},nativeOn:{click:function(e){return t.addCondition(null)}}})],1),"Notes"==t.conditionsProperty?t._l(t.translation.notes,(function(e,i){return n("div",{key:i,staticClass:"panel-horizontal-dense"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.translation.notes[i],expression:"translation.notes[i]"}],staticClass:"flex",attrs:{type:"text"},domProps:{value:t.translation.notes[i]},on:{input:function(e){e.target.composing||t.$set(t.translation.notes,i,e.target.value)}}}),n("Button",{attrs:{icon:"delete"},nativeOn:{click:function(e){return t.deleteCondition(i)}}})],1)})):"Localized context"==t.conditionsProperty?t._l(t.conditions,(function(e,i){return n("div",{key:i,staticClass:"panel-horizontal-dense"},[n("Select",{staticClass:"flex",attrs:{value:e[0],items:t.fullContextKeys},on:{"update:value":function(n){return t.$set(e,0,n)}}}),n("p",{staticClass:"icon"},[t._v("east")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e[1],expression:"c[1]"}],staticClass:"flex",attrs:{type:"text"},domProps:{value:e[1]},on:{input:function(n){n.target.composing||t.$set(e,1,n.target.value)}}}),n("Button",{attrs:{icon:"clear"},nativeOn:{click:function(e){return t.deleteCondition(i)}}})],1)})):t._l(t.conditions,(function(e,i){return n("div",{key:i,staticClass:"panel-horizontal-dense"},[n("Button",{attrs:{icon:"vertical_align_top"},nativeOn:{click:function(e){return t.addCondition(i)}}}),"conditions"==t.conditionsProperty?n("Button",{attrs:{icon:"link_off"},model:{value:e.passive,callback:function(n){t.$set(e,"passive",n)},expression:"c.passive"}}):t._e(),n("Select",{staticClass:"flex",attrs:{value:e.entity,items:t.entities},on:{"update:value":function(n){return t.$set(e,"entity",n)}}}),n("p",{staticClass:"icon"},[t._v("west")]),t.fullContext[e.entity]?n("Select",{staticClass:"flex",attrs:{value:e.tag,items:t.fullContext[e.entity]},on:{"update:value":function(n){return t.$set(e,"tag",n)}}}):t._e(),n("Button",{attrs:{icon:"clear"},nativeOn:{click:function(e){return t.deleteCondition(i)}}})],1)}))],2):t._e()]),t.blocks&&t.block?n("div",{staticClass:"panel-sparse"},[n("div",{staticClass:"panel-horizontal-dense"},[n("h2",{staticClass:"flex"},[t._v("Block")]),n("Button",{attrs:{icon:"add",text:"State"},nativeOn:{click:function(e){return t.addState(null)}}}),n("Button",{class:{highlight:t.conditions==t.block.requirements},attrs:{icon:"lock",text:"Requirements"},nativeOn:{click:function(e){return t.editBlockRequirements(e)}}}),n("Button",{attrs:{icon:"delete"},nativeOn:{click:function(e){return t.deleteBlock(e)}}})],1),t._l(t.states,(function(e,i){return n("div",{key:i,staticClass:"panel-dense wrap"},[n("div",{staticClass:"panel-horizontal-dense"},[n("Button",{attrs:{icon:"vertical_align_top"},nativeOn:{click:function(e){return t.addState(i)}}}),n("h2",{staticClass:"flex"},[t._v("#_"+t._s(i))]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"s.text"}],attrs:{type:"text"},domProps:{value:e.text},on:{input:function(n){n.target.composing||t.$set(e,"text",n.target.value)}}}),n("Button",{attrs:{icon:"clear"},nativeOn:{click:function(e){return t.deleteState(i)}}})],1),n("p",{staticClass:"text-caption text-faded"},[t._v("Advanced data: IPA & glossing.")]),n("div",{staticClass:"panel-horizontal-dense flex-content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.ipa,expression:"s.ipa"}],attrs:{type:"text"},domProps:{value:e.ipa},on:{input:function(n){n.target.composing||t.$set(e,"ipa",n.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.glossing,expression:"s.glossing"}],attrs:{type:"text"},domProps:{value:e.glossing},on:{input:function(n){n.target.composing||t.$set(e,"glossing",n.target.value)}}})]),n("p",{staticClass:"text-caption text-faded"},[t._v(' Transition: "next" or best of "0 1 ...". ')]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.transition,expression:"s.transition"}],attrs:{type:"text"},domProps:{value:e.transition},on:{input:function(n){n.target.composing||t.$set(e,"transition",n.target.value)}}}),n("div",{staticClass:"panel-horizontal-dense flex-content"},[n("Button",{attrs:{icon:"visibility_off",text:"Implicit"},model:{value:e.implicit,callback:function(n){t.$set(e,"implicit",n)},expression:"s.implicit"}}),n("Button",{class:{highlight:t.conditions==e.conditions},attrs:{icon:"widgets",text:"Conditions"},nativeOn:{click:function(e){return t.editStateConditions(i)}}})],1)])}))],2):t._e()]):t._e()])},nt=[],it=(n("99af"),n("0481"),n("13d5"),n("4069"),n("b64b"),n("07ac"),n("ac1f"),n("6062"),n("3ca3"),n("1276"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{directives:[{name:"show",rawName:"v-show",value:t.valid,expression:"valid"}],staticClass:"small",class:{"text-faded":t.implicit,glossed:t.glosses},attrs:{disabled:t.disabled},on:{click:t.move}},[t.interactive?[n("IndexedColor",{attrs:{passive:!0,indexes:t.passiveColors}}),n("IndexedColor",{attrs:{indexes:t.activeColors}})]:t._e(),t.glosses?n("div",{staticClass:"glosses"},[n("p",{staticClass:"text-ipa"},[t._v(t._s(t.glosses[0]))]),n("p",[t._v(t._s(t.glosses[1]))])]):n("p",[t._v(t._s(t.text))])],2)}),st=[],at=(n("4de4"),n("4160"),n("a15b"),n("a9e3"),n("159b"),n("d0af")),ot=n("d0ff"),rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.classes?n("div",{staticClass:"panel-horizontal-dense line",class:{passive:t.passive}},t._l(t.classes,(function(t,e){return n("div",{key:e,staticClass:"dash",class:t})})),0):t._e()},lt=[],ct={name:"IndexedColor",props:["indexes","passive"],computed:{classes:function(){return this.indexes.map((function(t){return"colored-"+t}))}}},ut=ct,pt=(n("3436"),Object(d["a"])(ut,rt,lt,!1,null,"4d0dd305",null)),dt=pt.exports,ht={name:"PhraseBlock",components:{IndexedColor:dt},props:["id","context","requirements","states","interactive","glossed"],data:function(){return{state:void 0,valid:!1}},computed:{transition:function(){var t;return null===(t=this.state)||void 0===t?void 0:t.transition},implicit:function(){var t;return null===(t=this.state)||void 0===t?void 0:t.implicit},text:function(){var t;return null===(t=this.state)||void 0===t?void 0:t.text},glosses:function(){var t,e,n,i;return this.glossed&&(null===(t=this.state)||void 0===t?void 0:t.ipa)&&(null===(e=this.state)||void 0===e?void 0:e.glossing)?[null===(n=this.state)||void 0===n?void 0:n.ipa,null===(i=this.state)||void 0===i?void 0:i.glossing]:null},conditions:function(){var t;return null===(t=this.state)||void 0===t?void 0:t.conditions},disabled:function(){return!(this.interactive&&this.transition)},display:function(){return this.glosses?this.glosses.join("\n")+"\n":this.text+" "},entities:function(){return Object.keys(this.context)},passiveColors:function(){var t=[];return this.requirements&&(t=t.concat(this.requirements)),this.conditions&&(t=t.concat(this.transition?this.conditions.filter((function(t){return t.passive})):this.conditions)),this.getConditionColors(t)},activeColors:function(){return this.transition&&this.conditions?this.getConditionColors(this.conditions.filter((function(t){return!t.passive}))):[]}},watch:{id:{handler:function(){this.valid=!1},immediate:!0},context:{handler:function(){var t=this.context&&(!this.requirements||1==this.checkConditions(this.requirements)[0]);if(t){var e=this.findBestState();this.valid?this.state=e:this.applyState(e)}else this.state&&(this.applyState(null),this.state=null);this.valid=t},immediate:!0}},methods:{getConditionColors:function(t){var e=this,n=new Set(t.map((function(t){return t.entity})));return Object(ot["a"])(n).map((function(t){return e.entities.indexOf(t)}))},checkConditions:function(t){var e=this,n=0,i=0;return t.forEach((function(t){var s=t.entity,a=t.tag;n+=e.context[s].has(a),i+=!!a})),[n/t.length,i]},findBestState:function(t){var e,n,i,s=this,a=null,o=0,r=!1,l=null!==(e=null!==(n=null===t||void 0===t?void 0:t.map((function(t){return s.states[t]})))&&void 0!==n?n:this.states)&&void 0!==e?e:[];return null===l||void 0===l||l.filter((function(t){return t.conditions})).forEach((function(t){var e=s.checkConditions(t.conditions),n=Object(at["a"])(e,2),i=n[0],l=n[1];(1==o?1==i&&l>r:i>o)&&(a=t,o=i,r=l)})),null!==(i=a)&&void 0!==i?i:l[0]},applyConditions:function(t,e,n){null===e||void 0===e||e.filter((function(t){return!t.passive&&t.tag})).forEach((function(e){var i,s,a=e.entity,o=e.tag;n?null===(i=t[a])||void 0===i||i.add(o):null===(s=t[a])||void 0===s||s.delete(o)}))},applyState:function(t){var e,n=Object.assign({},this.context);this.applyConditions(n,null===(e=this.state)||void 0===e?void 0:e.conditions,!1),this.applyConditions(n,null===t||void 0===t?void 0:t.conditions,!0),this.$emit("update:context",n)},move:function(){if("string"==typeof this.transition)if("next"==this.transition){var t=this.states.indexOf(this.state),e=this.states[(t+1)%this.states.length];this.applyState(e)}else{var n=this.transition.split(" ").map((function(t){return Number(t)}));this.applyState(this.findBestState(n))}else this.transition}}},ft=ht,vt=(n("a74e"),Object(d["a"])(ft,it,st,!1,null,"115edb04",null)),mt=vt.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel-horizontal-dense wrap"},t._l(t.entities,(function(e,i){return n("div",{key:e,staticClass:"panel-horizontal-dense text-caption text-faded context wrap"},[n("h2",[t._v(t._s(e)+":"),n("IndexedColor",{attrs:{indexes:[i]}})],1),t._l(t.tags[i],(function(e){return n("p",{key:e},[t._v(t._s(e))])}))],2)})),0)},xt=[],bt={name:"PhraseContext",components:{IndexedColor:dt},props:["context","translation"],computed:{dictionary:function(){var t;return null===(t=this.translation)||void 0===t?void 0:t.reduce((function(t,e){return t[e[0]]=e[1],t}),{})},entities:function(){return this.translate(Object.keys(this.context))},tags:function(){var t=this;return Object.values(this.context).map((function(e){return t.translate(Object(ot["a"])(e))}))}},methods:{translate:function(t){var e=this;return this.dictionary?t.filter((function(t){return t in e.dictionary})).map((function(t){return e.dictionary[t]})):t}}},yt=bt,_t=(n("87f8"),Object(d["a"])(yt,gt,xt,!1,null,"67a13d4e",null)),Ct=_t.exports,kt={name:"PhrasebookEditor",components:{Button:f,Select:R,PhraseBlock:mt,PhraseContext:Ct},data:function(){return{file:[],selected:0,context:{},block:null,conditionsProperty:"",conditions:{}}},computed:{phrasebook:function(){return this.$store.state.phrasebook},phrase:function(){return this.phrasebook?this.phrasebook[this.selected]:null},translation:function(){return this.file[this.selected]},blocks:function(){var t;return null===(t=this.translation)||void 0===t?void 0:t.blocks},states:function(){var t;return null===(t=this.block)||void 0===t?void 0:t.states},entities:function(){return Object.keys(this.fullContext)},fullContext:function(){var t,e,n;return null!==(t=null===(e=this.phrase)||void 0===e||null===(n=e.context)||void 0===n?void 0:n.reduce((function(t,e){return t[e.entity]=e.tags.split(" "),t}),{}))&&void 0!==t?t:{}},fullContextKeys:function(){return this.entities.concat(Object.values(this.fullContext).flat())}},watch:{block:{handler:function(){this.$forceUpdate(),console.log("block deep update")},immediate:!0,deep:!0},phrase:{handler:function(){var t,e,n;this.context=null!==(t=null===(e=this.phrase)||void 0===e||null===(n=e.context)||void 0===n?void 0:n.reduce((function(t,e){return t[e.entity]=new Set,t}),{}))&&void 0!==t?t:{}},immediate:!0},selected:{handler:function(){if(!this.file[this.selected]){while(this.file.length<this.selected)this.file.push({});this.$set(this.file,this.selected,{})}},immediate:!0}},methods:{loadFromLect:function(){var t=this;fetch(this.$store.state.root+window.prompt("Enter lect name")+"/phrasebook.json").then((function(t){return t.json()})).then((function(e){e&&(t.file=e)}))},loadFromJson:function(){var t=JSON.parse(window.prompt("Enter JSON"));t&&(this.file=t)},saveToJson:function(){navigator.clipboard.writeText(JSON.stringify(this.file))},reset:function(){this.file=[],this.selected=0},addBlock:function(){this.blocks||this.$set(this.translation,"blocks",[]),this.$set(this.blocks,this.blocks.length,{states:[]})},deleteBlock:function(){var t=this.blocks.indexOf(this.block);t<0||this.$delete(this.blocks,t)},addState:function(t){null==t&&(t=this.states.length),this.$set(this.states,t,{transition:"next"})},deleteState:function(t){this.$delete(this.states,t)},editStateConditions:function(t){this.conditionsProperty="conditions",this.states[t].conditions||(this.states[t].conditions=[]),this.conditions=this.states[t].conditions,this.$forceUpdate()},editBlockRequirements:function(){this.conditionsProperty="requirements",this.block.requirements||(this.block.requirements=[]),this.conditions=this.block.requirements,this.$forceUpdate()},editLocalizedContext:function(){this.translation.context||(this.translation.context=[]),this.conditionsProperty="Localized context",this.conditions=this.translation.context},editNotes:function(){this.translation.notes||(this.translation.notes=[]),this.conditionsProperty="Notes",this.conditions=this.translation.notes},addCondition:function(t){null==t&&(t=this.conditions.length),this.conditions.splice(t,0,"Conditions"==this.conditionsProperty?{}:[])},deleteCondition:function(t){this.conditions.splice(t,1)}}},wt=kt,Ot=(n("7118"),Object(d["a"])(wt,et,nt,!1,null,"6a557b2a",null)),Pt=Ot.exports,$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.phonemes?n("div",{staticClass:"section"},[n("div",{staticClass:"panel scroll"},[n("ChipsQuery",{attrs:{items:t.lects,itemKey:"name"},on:{query:function(e){t.lectQuery=e}}}),n("InputQuery",{attrs:{placeholder:"Query phonemes, e.g. voiced -velar..."},on:{query:function(e){t.featureQuery=e}}}),t._l(t.categories,(function(e){return n("div",{key:e,staticClass:"panel"},[n("h2",[t._v(t._s(e+"s"))]),n("PhoneticTable",{attrs:{filter:e,featureQuery:t.featureQuery,lectQuery:t.lectQuery,phonemes:t.phonemes},model:{value:t.phoneme,callback:function(e){t.phoneme=e},expression:"phoneme"}})],1)}))],2),n("PhonemeDetails",{attrs:{phoneme:t.phoneme}})],1):t._e()},St=[],Bt=(n("7db0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.many?n("div",{staticClass:"panel-horizontal-dense scroll"},[n("button",{staticClass:"small icon round",on:{click:t.reset}},[t._v("clear")]),t._l(t.keys,(function(e,i){return n("button",{key:e,staticClass:"small round",class:t.highlights[i],on:{click:function(e){return t.toggle(i)}}},[t._v(" "+t._s(e)+" ")])}))],2):t._e()}),jt=[],zt=(n("cb29"),n("fc11")),Nt={name:"ChipsQuery",props:["items","itemKey"],data:function(){return{input:[]}},computed:{keys:function(){var t=this;return this.itemKey?this.items.map((function(e){return e[t.itemKey]})):this.items},highlights:function(){return this.input.map((function(t){return t?t>0?"highlight-confirm":"highlight-alert":null}))},many:function(){return this.keys.length>1}},watch:{items:{handler:function(){this.reset()},immediate:!0},many:{handler:function(){this.many||this.$emit("query",Object(zt["a"])({},this.keys[0],1))},immediate:!0},input:function(t){var e=this;this.$emit("query",t.reduce((function(t,n,i){return n&&(t[e.keys[i]]=n>0),t}),{}))}},methods:{toggle:function(t){this.$set(this.input,t,(this.input[t]+2)%3-1)},reset:function(){this.input=new Array(this.keys.length).fill(0)}}},Mt=Nt,Et=Object(d["a"])(Mt,Bt,jt,!1,null,null,null),Tt=Et.exports,Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"root"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],attrs:{placeholder:t.placeholder,type:"text"},domProps:{value:t.input},on:{input:function(e){e.target.composing||(t.input=e.target.value)}}})])},Jt=[],qt={name:"InputQuery",props:["placeholder"],data:function(){return{input:""}},watch:{input:function(){this.$emit("query",this.input.toLowerCase().split(" ").filter((function(t){return t})).reduce((function(t,e){return"-"===e[0]?t[e.substr(1)]=!1:t[e]=!0,t}),{}))}}},It=qt,Qt=(n("108f"),Object(d["a"])(It,Lt,Jt,!1,null,"1d0785bf",null)),Ht=Qt.exports,At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel-horizontal-dense scroll wrap",class:{narrow:t.narrow},attrs:{id:"root"}},t._l(t.filtered,(function(e,i){return n("PhoneticItem",{key:i,attrs:{selected:t.phoneme==e,faded:!t.fitting[i],ipa:e.ipa,str:t.graphemes[i]},nativeOn:{click:function(n){return t.$emit("select",e)}}})})),1)},Rt=[],Ut=(n("4fad"),{name:"PhoneticTable",components:{PhoneticItem:z},props:["phoneme","filter","lectQuery","featureQuery","phonemes"],model:{prop:"phoneme",event:"select"},computed:{filtered:function(){var t=this;return this.filter?this.phonemes.filter((function(e){return e.tags.includes(t.filter)})):this.phonemes},fitting:function(){var t=this;return this.filtered.map((function(e){return t.pass(Object.keys(e.lects),t.lectQuery)&&t.pass(e.tags,t.featureQuery)}))},singleLect:function(){var t=null;for(var e in this.lectQuery)if(this.lectQuery[e]>0){if(t)return;t=e}return t},graphemes:function(){var t=this;return this.singleLect?this.filtered.map((function(e){var n,i;return null===(n=e.lects[t.singleLect])||void 0===n||null===(i=n.samples[0])||void 0===i?void 0:i.grapheme})):[]},narrow:function(){return this.filtered.length<=12}},methods:{pass:function(t,e){for(var n=0,i=Object.entries(e);n<i.length;n++){var s=Object(at["a"])(i[n],2),a=s[0],o=s[1];if(o!=t.includes(a))return!1}return!0}}}),Ft=Ut,Kt=(n("4021"),Object(d["a"])(Ft,At,Rt,!1,null,"390463f0",null)),Yt=Kt.exports,Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel"},[n("div",{staticClass:"card panel"},[n("h1",{staticClass:"text-ipa"},[t._v(t._s(t.phoneme.ipa))]),n("p",{staticClass:"text-caption text-faded text-spaced"},[t._v(t._s(t.phoneme.tags))])]),n("audio",{ref:"player"}),t._l(t.phoneme.lects,(function(e,i){return n("PhonemeUse",{key:i,attrs:{lect:i,use:e},on:{play:t.play}})}))],2)},Zt=[],Wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel card"},[n("div",{staticClass:"title"},[n("h2",{staticClass:"flex"},[t._v(t._s(t.lect))]),t._l(t.graphemes,(function(e){return n("b",{key:e,staticClass:"text-dot"},[t._v(" "+t._s(e))])}))],2),n("div",{staticClass:"panel-solid"},t._l(t.fullSamples,(function(e,i){return n("button",{key:i,staticClass:"small panel-horizontal",on:{click:function(e){return t.play(i)}}},[n("span",{staticClass:"icon"},[t._v(t._s(t.canPlay[i]?"play_arrow":"arrow_right"))]),n("span",{staticClass:"text",domProps:{innerHTML:t._s(t.highlight(e.word,e.grapheme))}}),e.ipa?n("span",{staticClass:"text-ipa",domProps:{innerHTML:t._s(t.highlight(e.ipa,t.use.phoneme))}}):t._e()])})),0),t._l(t.use.notes,(function(t,e){return n("PhoneticNote",{key:e,attrs:{text:t}})}))],2)},Gt=[],Vt=(n("4d63"),n("25f0"),n("5319"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.parsed?n("p",{staticClass:"text-caption",domProps:{innerHTML:t._s(t.parsed)}}):t._e()}),Xt=[],te={name:"PhoneticNote",props:["text"],computed:{parsed:function(){return this.text.replace(/<(.+)>/g,"<b>$1</b>").replace(/\/([^/<>]+)\//g,"<span class='text-ipa'>$1</span>")}}},ee=te,ne=Object(d["a"])(ee,Vt,Xt,!1,null,null,null),ie=ne.exports,se={name:"PhonemeUse",components:{PhoneticNote:ie},props:["lect","use"],data:function(){return{canPlay:[]}},computed:{root:function(){return this.$store.state.root+this.lect+"/audio/"},fullSamples:function(){return this.use.samples.filter((function(t){return t.word||t.ipa}))},urls:function(){var t=this;return this.fullSamples.map((function(t){var e,n;return null!==(e=null===(n=t.word)||void 0===n?void 0:n.replace(/\*/g,""))&&void 0!==e?e:t.ipa})).map((function(e){return t.root+e+".mp3"}))},graphemes:function(){return new Set(this.use.samples.map((function(t){return t.grapheme})))}},watch:{urls:{handler:function(){var t=this;this.canPlay=new Array(this.urls),this.urls.forEach((function(e,n){fetch(e,{method:"HEAD"}).then((function(e){t.$set(t.canPlay,n,e.ok)}))}))},immediate:!0}},methods:{color:function(t){return"<span style='color: var(--color-highlight)'>".concat(t,"</span>")},highlight:function(t,e){return t?t.includes("*")?t.replace(/\*([^*]+)\*/g,this.color("$1")):t.replace(new RegExp(e,"g"),this.color(e)):null},play:function(t){this.canPlay[t]&&this.$emit("play",this.urls[t])}}},ae=se,oe=(n("a05c"),Object(d["a"])(ae,Wt,Gt,!1,null,"70e1f8a6",null)),re=oe.exports,le={name:"PhonemeDetails",components:{PhonemeUse:re},props:["phoneme"],methods:{play:function(t){var e=this.$refs.player;e.src=t,e.play()}}},ce=le,ue=(n("7b5d"),Object(d["a"])(ce,Dt,Zt,!1,null,"67fa1ee8",null)),pe=ue.exports,de={name:"Phonology",components:{PhoneticTable:Yt,PhonemeDetails:pe,ChipsQuery:Tt,InputQuery:Ht},data:function(){return{categories:["vowel","consonant"],phoneme:null,lectQuery:{},featureQuery:{}}},computed:{lects:function(){return this.$store.state.lects},phonemes:function(){return this.$store.state.phonemes}},watch:{phonemes:{handler:function(){if(this.phonemes){var t,e=localStorage.phoneme;this.phoneme=null!==(t=this.phonemes.find((function(t){return t.ipa==e})))&&void 0!==t?t:this.phonemes[0]}},immediate:!0}},destroyed:function(){localStorage.phoneme=this.phoneme.ipa}},he=de,fe=(n("3522"),Object(d["a"])(he,$t,St,!1,null,"07f7b386",null)),ve=fe.exports,me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.lects?n("div",{staticClass:"section panel"},[n("ChipsSelect",{attrs:{items:t.lects,itemKey:"name"},model:{value:t.lect,callback:function(e){t.lect=e},expression:"lect"}}),t.converter?n("div",{staticClass:"split"},[n("div",{staticClass:"panel"},[n("div",{staticClass:"panel-horizontal"},[n("Select",{staticClass:"flex",attrs:{value:t.sourceMapping,items:t.fullMappings,display:"name"},on:{"update:value":function(e){t.sourceMapping=e}}}),t.source?n("Button",{attrs:{icon:"clear"},nativeOn:{click:function(e){t.source=""}}}):n("Button",{attrs:{icon:"subject"},nativeOn:{click:function(e){return t.displaySample(e)}}}),n("Button",{attrs:{icon:"publish"},nativeOn:{click:function(e){return t.$refs.file.click()}}}),n("Button",{directives:[{name:"show",rawName:"v-show",value:!t.resultMapping.partial,expression:"!resultMapping.partial"}],attrs:{icon:"swap_horiz"},nativeOn:{click:function(e){return t.swap(e)}}})],1),n("ConverterText",{attrs:{source:t.source,mapping:t.sourceMapping},on:{result:function(e){t.intermediate=e}}}),t.showMappings?n("MappingTable",{attrs:{mapping:t.sourceMapping}}):t._e()],1),n("div",{staticClass:"panel"},[n("div",{staticClass:"panel-horizontal"},[n("Select",{staticClass:"flex",attrs:{value:t.resultMapping,items:t.mappings,display:"name"},on:{"update:value":function(e){t.resultMapping=e}}}),n("Button",{attrs:{icon:"visibility"},model:{value:t.showMappings,callback:function(e){t.showMappings=e},expression:"showMappings"}}),n("Button",{attrs:{icon:"file_copy"},nativeOn:{click:function(e){return t.copy(e)}}})],1),n("ConverterText",{attrs:{readonly:!0,source:t.intermediate,mapping:t.resultMapping,reverse:!0},on:{result:function(e){t.result=e}}}),t.showMappings?n("MappingTable",{attrs:{mapping:t.resultMapping,reverse:!0}}):t._e()],1)]):n("h2",[t._v("No data for this lect.")]),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"file",attrs:{type:"file",accept:".txt"},on:{change:t.upload}}),n("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"link"})],1):t._e()},ge=[],xe=(n("9911"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.many?n("div",{staticClass:"panel-horizontal-dense scroll"},t._l(t.keys,(function(e,i){return n("Button",{key:i,staticClass:"small round",class:{highlight:t.value==t.items[i]},attrs:{text:e},nativeOn:{click:function(e){return t.select(i)}}})})),1):t._e()}),be=[],ye={name:"ChipsSelect",components:{Button:f},props:["value","items","itemKey"],model:{prop:"value",event:"select"},computed:{keys:function(){var t=this;return this.itemKey?this.items.map((function(e){return e[t.itemKey]})):this.items},many:function(){return this.keys.length>1}},watch:{value:{handler:function(){this.value||this.select(0)},immediate:!0}},methods:{select:function(t){this.$emit("select",this.items[t])}}},_e=ye,Ce=Object(d["a"])(_e,xe,be,!1,null,null,null),ke=Ce.exports,we=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.pairs.length>0?n("div",{staticClass:"card panel-horizontal wrap"},t._l(t.pairs,(function(e,i){return n("p",{key:i},[n("span",{staticClass:"text-faded"},[t._v(t._s(e[t.left].replace(" ","_")))]),n("span",[t._v(t._s(e[t.right].replace(" ","_")))])])})),0):t._e()},Oe=[],Pe={name:"MappingTable",props:["mapping","reverse"],computed:{pairs:function(){return this.mapping.pairs},left:function(){return this.reverse?1:0},right:function(){return this.reverse?0:1}}},$e=Pe,Se=(n("0e97"),Object(d["a"])($e,we,Oe,!1,null,"0e0a4e2e",null)),Be=Se.exports,je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],ref:"textarea",attrs:{readonly:t.readonly},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})},ze=[],Ne=(n("fb6a"),n("498a"),n("54f8")),Me={name:"ConverterText",props:["source","mapping","readonly","reverse"],data:function(){return{text:"",result:""}},computed:{pairs:function(){return this.reverse?this.mapping.pairs.map((function(t){return[t[1],t[0]]})):this.mapping.pairs},reversePairs:function(){return this.pairs.map((function(t){return[t[1],t[0]]}))}},watch:{source:{handler:function(){this.text=this.readonly?this.convert(this.source,this.pairs):this.source},immediate:!0},text:{handler:function(){this.result=this.readonly?this.text:this.convert(this.text,this.pairs),this.$emit("result",this.result)},immediate:!0},pairs:{handler:function(){this.text=this.readonly?this.convert(this.source,this.pairs):this.convert(this.result,this.reversePairs)},deep:!0,immediate:!0}},methods:{capitalize:function(t){var e="",n=0;return" "==t.charAt(0)&&(e=" ",n=1),e+t.charAt(n).toUpperCase()+t.slice(n+1)},convert:function(t,e){if(!e||0===e.length)return t;t=" "+t.replace(/\n/g,"\n ").trim();for(var n="",i=0;i<t.length;){var s,a=!1,o=Object(Ne["a"])(e);try{for(o.s();!(s=o.n()).done;){for(var r=Object(at["a"])(s.value,2),l=r[0],c=r[1],u=l.length,p=t.substring(i,i+u),d=[[l,c],[this.capitalize(l),this.capitalize(c)],[l.toUpperCase(),c.toUpperCase()]],h=0,f=d;h<f.length;h++){var v=Object(at["a"])(f[h],2),m=v[0],g=v[1];if(p===m){a=!0,n+=g,i+=u;break}}if(a)break}}catch(x){o.e(x)}finally{o.f()}a||(n+=t[i],i++)}return n.replace(/\n /g,"\n").trim()}}},Ee=Me,Te=(n("2331"),Object(d["a"])(Ee,je,ze,!1,null,"70cf4be8",null)),Le=Te.exports,Je={name:"Converter",components:{Button:f,Select:R,ChipsSelect:ke,MappingTable:Be,ConverterText:Le},data:function(){return{lect:void 0,source:"",sourceMapping:void 0,result:"",resultMapping:void 0,intermediate:"",showMappings:!1}},computed:{lects:function(){return this.$store.state.lects},converter:function(){var t;return null===(t=this.lect)||void 0===t?void 0:t.converter},mappings:function(){var t;return null===(t=this.converter)||void 0===t?void 0:t.mappings},fullMappings:function(){return this.mappings.filter((function(t){return!t.partial}))},sample:function(){var t,e;return null!==(t=null===(e=this.converter)||void 0===e?void 0:e.sample)&&void 0!==t?t:""},defaultConversion:function(){var t;return null===(t=this.converter)||void 0===t?void 0:t.default}},watch:{mappings:function(t){t&&(this.sourceMapping=t[0],this.resultMapping=t[1])},sample:function(t){this.source=t},defaultConversion:function(t){t&&(this.sourceMapping=this.mappings[t[0]],this.resultMapping=this.mappings[t[1]])}},methods:{displaySample:function(){var t=this,e=this.sourceMapping;this.sourceMapping=this.mappings[this.defaultConversion[0]],this.source=this.sample,this.$nextTick((function(){t.sourceMapping=e}))},swap:function(){var t=this.result,e=this.sourceMapping;this.sourceMapping=this.resultMapping,this.resultMapping=e,this.source=t},upload:function(t){var e=this,n=new FileReader;n.onload=function(n){return e.download(t.target.files[0].name,e.convert(n.target.result))},n.readAsText(t.target.files[0])},download:function(t,e){var n=this.$refs.link;n.href="data:text/plain;charset=utf-8,"+encodeURIComponent(e),n.download=t,n.click()},copy:function(){navigator.clipboard.writeText(this.result)}}},qe=Je,Ie=(n("fc91"),Object(d["a"])(qe,me,ge,!1,null,"84aade22",null)),Qe=Ie.exports,He=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.lects&&t.phrasebook?n("div",{staticClass:"section panel"},[n("List",{attrs:{value:t.selected,items:t.phrasebook,indexed:"true",display:"preview"},on:{"update:value":function(e){t.selected=e}}}),t.phrase?n("div",{staticClass:"panel"},[n("div",{staticClass:"panel-horizontal-dense scroll small"},[n("Button",{staticClass:"round",attrs:{icon:"sticky_note_2",text:"Notes"},model:{value:t.noted,callback:function(e){t.noted=e},expression:"noted"}}),n("Button",{staticClass:"round",attrs:{icon:"widgets",text:"Context"},model:{value:t.contextual,callback:function(e){t.contextual=e},expression:"contextual"}}),n("Button",{staticClass:"round",attrs:{icon:"tune",text:"Interactive"},model:{value:t.interactive,callback:function(e){t.interactive=e},expression:"interactive"}}),n("Button",{staticClass:"round",attrs:{icon:"layers",text:"Glossed"},model:{value:t.glossed,callback:function(e){t.glossed=e},expression:"glossed"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.contextual,expression:"contextual"}],staticClass:"panel wrap card"},[n("div",{staticClass:"panel-horizontal-dense wrap"},t._l(t.phrase.blocks,(function(e,i){return n("PhraseBlock",{key:i,attrs:{id:t.selected,context:t.context,interactive:t.interactive,requirements:e.requirements,states:e.states},on:{"update:context":function(e){t.context=e}}})})),1),t.interactive?n("PhraseContext",{attrs:{context:t.context}}):t._e()],1),t._l(t.translations,(function(e,i){return n("PhraseTranslation",{key:i,attrs:{id:t.selected,context:t.context,lect:t.lects[i].name,translation:e,interactive:t.interactive,glossed:t.glossed,noted:t.noted},on:{"update:context":function(e){t.context=e}}})}))],2):t._e()],1):t._e()},Ae=[],Re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.translation?n("div",{staticClass:"panel card"},[n("div",{staticClass:"panel-horizontal-dense small"},[n("Button",{attrs:{icon:"content_copy"},nativeOn:{click:function(e){return t.copy(e)}}}),t.interactive&&t.translation.context?n("Button",{attrs:{icon:"widgets"},model:{value:t.contextual,callback:function(e){t.contextual=e},expression:"contextual"}}):t._e(),n("h2",[t._v(t._s(t.lect))])],1),n("div",{staticClass:"panel-horizontal-dense wrap flex"},t._l(t.translation.blocks,(function(e,i){return n("PhraseBlock",{key:i,ref:"blocks",refInFor:!0,attrs:{id:t.id,context:t.context_,interactive:t.interactive,glossed:t.glossed,requirements:e.requirements,states:e.states},on:{"update:context":function(e){t.context_=e}}})})),1),t.contextual&&t.interactive?n("PhraseContext",{attrs:{context:t.context,translation:t.translation.context}}):t._e(),t.noted?t._l(t.translation.notes,(function(t,e){return n("PhoneticNote",{key:e,attrs:{text:t}})})):t._e()],2):t._e()},Ue=[],Fe={name:"PhraseTranslation",components:{Button:f,PhraseContext:Ct,PhraseBlock:mt,PhoneticNote:ie},props:["id","lect","context","translation","interactive","glossed","noted"],data:function(){return{context_:void 0,contextual:!1}},computed:{text:function(){var t;return null===(t=this.$refs.blocks)||void 0===t?void 0:t.filter((function(t){return t.valid})).map((function(t){return t.display})).join("")}},watch:{context:function(){this.context_=this.context},context_:function(){this.$emit("update:context",this.context_)}},methods:{copy:function(){navigator.clipboard.writeText(this.text)}}},Ke=Fe,Ye=(n("108c"),Object(d["a"])(Ke,Re,Ue,!1,null,"37be05f3",null)),De=Ye.exports,Ze={name:"Phrasebook",components:{Button:f,List:W,PhraseContext:Ct,PhraseBlock:mt,PhraseTranslation:De},data:function(){return{selected:void 0,context:void 0,interactive:!1,glossed:!1,noted:!1,contextual:!0}},computed:{lects:function(){return this.$store.state.lects},phrasebook:function(){return this.$store.state.phrasebook},phrase:function(){return this.phrasebook?this.phrasebook[this.selected]:void 0},translations:function(){var t=this;return this.lects.map((function(e){return e.phrasebook?e.phrasebook[t.selected]:void 0}))}},watch:{phrasebook:{handler:function(){this.phrasebook&&(this.selected=localStorage.phrase)},immediate:!0},phrase:{handler:function(){var t,e,n;this.context=null!==(t=null===(e=this.phrase)||void 0===e||null===(n=e.context)||void 0===n?void 0:n.reduce((function(t,e){return t[e.entity]=new Set,t}),{}))&&void 0!==t?t:{}},immediate:!0}},destroyed:function(){localStorage.phrase=this.selected}},We=Ze,Ge=(n("f748"),Object(d["a"])(We,He,Ae,!1,null,"4a9eabec",null)),Ve=Ge.exports,Xe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"root"}},[n("div",{attrs:{id:"map"}},[n("LectsMap",{attrs:{catalogue:t.catalogue,selected:t.selected,visible:t.visible},on:{toggle:t.toggleLect}})],1),n("div",{staticClass:"panel",attrs:{id:"ui"}},[n("div",{staticClass:"panel card",attrs:{id:"top"}},[n("div",{staticClass:"panel-horizontal"},[n("Button",{attrs:{icon:"info"},model:{value:t.about,callback:function(e){t.about=e},expression:"about"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"flex",attrs:{type:"text",placeholder:"Search languages..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),n("Button",{attrs:{icon:"arrow_forward",disabled:t.empty},nativeOn:{click:function(e){return t.load(e)}}})],1),n("div",{staticClass:"panel-horizontal-dense scroll-hidden"},[t.empty?n("p",{staticClass:"text-faded",attrs:{id:"placeholder"}},[t._v(" Selected languages will appear here. ")]):t._e(),t._l(t.lects,(function(e,i){return n("Button",{key:i,staticClass:"small round",attrs:{text:e.name},nativeOn:{click:function(n){return t.toggleLect(e)}}})}))],2)]),n("div",{staticClass:"panel scroll"},[t.about?n("div",{staticClass:"panel card center text-center",attrs:{id:"about"}},[n("h1",[t._v("Ævzag")]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.quote,expression:"quote"}]},[t._v(t._s(t.quote))]),n("div",{staticClass:"panel-horizontal center wrap"},[n("router-link",{attrs:{to:"/editor/phonology"}},[t._v("Editor tools")]),n("a",{attrs:{href:"https://github.com/alkaitagi/Avzag#contacts"}},[t._v("Contacts")]),n("a",{attrs:{href:"https://github.com/alkaitagi/Avzag#credits"}},[t._v("Credits")]),n("a",{attrs:{href:"https://github.com/alkaitagi/Avzag"}},[t._v("GitHub")])],1)]):t._e(),t._l(t.catalogue,(function(e,i){return n("LectCard",{key:i,attrs:{lect:e,selected:t.selected[i],query:t.query},on:{visible:function(n){return t.setVisibility(e,n)}},nativeOn:{click:function(n){return t.toggleLect(e)}}})}))],2)])])},tn=[],en=(n("841c"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("l-map",{ref:"map",attrs:{center:t.center,zoom:t.zoom,options:{zoomControl:!1}},on:{"update:center":function(e){t.center=e},"update:zoom":function(e){t.zoom=e}}},[n("l-tile-layer",{attrs:{url:t.layerUrl,options:t.layerOptions}}),t._l(t.catalogue,(function(e,i){return[e.coordinates?n("l-marker",{key:i,attrs:{"lat-lng":e.coordinates},on:{click:function(n){return t.$emit("toggle",e)}}},[n("l-icon",{attrs:{"icon-anchor":[0,0]}},[n("div",{staticClass:"marker",class:"zoom-"+t.zoom},[n("div",{staticClass:"icon",class:{selected:t.selected[i]}},[t._v(" expand_less ")]),n("h2",{class:{"text-faded":t.faded[i],selected:!t.faded[i]&&t.selected[i]}},[t._v(" "+t._s(e.name)+" ")])])])],1):t._e()]}))],2)}),nn=[],sn=n("2699"),an=n("a40a"),on=n("4e2b"),rn=n("fbba"),ln={name:"LectsMap",components:{LMap:sn["a"],LTileLayer:an["a"],LMarker:on["a"],LIcon:rn["a"]},props:["catalogue","selected","visible"],data:function(){return{center:null,zoom:null,options:{zoomControl:!1},layerUrl:"https://api.mapbox.com/styles/v1/mapbox/light-v10/tiles/{z}/{x}/{y}?access_token={accessToken}",layerOptions:{attribution:'<a href="https://www.openstreetmap.org/">OpenStreetMap</a> | <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a> | <a href="https://www.mapbox.com/">Mapbox</a>',tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoiYWxrYWl0YWdpIiwiYSI6ImNrZngwYTlqZjA1Mm4ycm5rcW94YmV4bHoifQ.c--QtLURoBAPTqqrLGZ0qQ"}}},computed:{faded:function(){var t=this;return this.visible.length?this.catalogue.map((function(e){return!t.visible.includes(e)})):[]}},created:function(){var t,e;this.center=JSON.parse(null!==(t=localStorage.mapCenter)&&void 0!==t?t:"[43, 44]"),this.zoom=JSON.parse(null!==(e=localStorage.mapZoom)&&void 0!==e?e:"7"),this.setupTheming()},destroyed:function(){localStorage.mapCenter=JSON.stringify(this.center),localStorage.mapZoom=JSON.stringify(this.zoom)},methods:{setupTheming:function(){var t=this,e=function(e){return t.layerUrl="https://api.mapbox.com/styles/v1/mapbox/".concat(e,"-v10/tiles/{z}/{x}/{y}?access_token={accessToken}")};window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&e("dark"),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(t){e(t.matches?"dark":"light")}))}}},cn=ln,un=(n("0d7c"),n("20b6"),Object(d["a"])(cn,en,nn,!1,null,"3dc72336",null)),pn=un.exports,dn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("div",{staticClass:"panel-horizontal card"},[n("div",{staticClass:"panel-solid"},[n("h1",{class:{selected:t.selected}},[t._v(t._s(t.lect.name))]),n("p",{staticClass:"text-caption"},t._l(t.lect.family,(function(e){return n("span",{key:e,staticClass:"text-dot",attrs:{split:""}},[t._v(" "+t._s(e)+" ")])})),0)]),n("img",{attrs:{src:t.flag}})]):t._e()},hn=[],fn=(n("a623"),{name:"LectCard",props:["lect","selected","query"],computed:{family:function(){return this.lect.family.join(" › ")},flag:function(){return this.$store.state.root+this.lect.name+"/flag.png"},tags:function(){return[this.lect.name,this.lect.tags,this.lect.family.join(" ")].join(" ").toLowerCase()},visible:function(){var t,e=this;return null===(t=this.query)||void 0===t?void 0:t.every((function(t){return e.tags.includes(t)}))}},watch:{visible:function(){this.$emit("visible",this.visible)}}}),vn=fn,mn=(n("caa4"),Object(d["a"])(vn,dn,hn,!1,null,"bfd8cc6a",null)),gn=mn.exports,xn={name:"Home",components:{LectsMap:pn,LectCard:gn,Button:f},data:function(){return{about:!1,search:"",lects:[],visible:[]}},computed:{catalogue:function(){return this.$store.state.catalogue},empty:function(){return 0==this.lects.length},query:function(){return this.search?this.search.toLowerCase().split(" "):null},selected:function(){var t,e=this;return null===(t=this.catalogue)||void 0===t?void 0:t.map((function(t){return e.lects.includes(t)}))},quote:function(){var t;return null===(t=this.lects[this.lects.length-1])||void 0===t?void 0:t.quote}},watch:{catalogue:{handler:function(){var t,e=this;this.catalogue&&(this.lects=null===(t=JSON.parse(localStorage.lects))||void 0===t?void 0:t.map((function(t){return e.catalogue.find((function(e){return e.name==t}))})))},immediate:!0}},destroyed:function(){localStorage.lects=JSON.stringify(this.lects.map((function(t){return t.name})))},methods:{toggleLect:function(t){var e=this.lects.indexOf(t);e<0?this.lects.push(t):this.lects.splice(e,1)},setVisibility:function(t,e){var n=this.visible.indexOf(t);n<0?e&&this.visible.push(t):e||this.visible.splice(n,1)},load:function(){this.$store.dispatch("loadLects",this.lects.map((function(t){return t.name}))),this.$router.push({name:"Phonology"})}}},bn=xn,yn=(n("156b"),Object(d["a"])(bn,Xe,tn,!1,null,"31f3aa2c",null)),_n=yn.exports;i["a"].use(k["a"]);var Cn=[{path:"/",name:"Home",component:_n},{path:"/editor/phonology/",name:"PhonologyEditor",component:T},{path:"/editor/converter/",name:"ConverterEditor",component:tt},{path:"/editor/phrasebook/",name:"PhrasebookEditor",component:Pt},{path:"/phonology/",name:"Phonology",component:ve},{path:"/converter/",name:"Converter",component:Qe},{path:"/phrasebook/",name:"Phrasebook",component:Ve},{path:"*",redirect:{name:"Home"}}],kn=new k["a"]({routes:Cn}),wn=kn,On=n("9483");Object(On["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});n("96cf");var Pn=n("c964"),$n=n("2f62");i["a"].use($n["a"]);var Sn=function(t,e){var n,i="",s=Object(Ne["a"])(e.primary);try{for(s.s();!(n=s.n()).done;){var a=n.value;if(t.includes(a.ipa)){i+=a.tags;break}}}catch(c){s.e(c)}finally{s.f()}var o,r=Object(Ne["a"])(e.secondary);try{for(r.s();!(o=r.n()).done;){var l=o.value;t.includes(l.ipa)&&(i+=" "+l.tags)}}catch(c){r.e(c)}finally{r.f()}return i},Bn=new $n["a"].Store({state:{root:"/lects/",ipa:void 0,catalogue:void 0,phrasebook:void 0,lects:void 0,phonemes:void 0},mutations:{setState:function(t,e){var n=Object(at["a"])(e,2),i=n[0],s=n[1];t[i]=s}},actions:{initialize:function(t){return Object(Pn["a"])(regeneratorRuntime.mark((function e(){var n,i,s,a,o,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.dispatch,i=t.commit,s=t.state,a=0,o=["ipa","catalogue","phrasebook"];case 2:if(!(a<o.length)){e.next=11;break}return r=o[a],e.next=6,n("loadJson",s.root+r+".json");case 6:l=e.sent,i("setState",[r,l]);case 8:a++,e.next=2;break;case 11:case"end":return e.stop()}}),e)})))()},loadLects:function(t,e){return Object(Pn["a"])(regeneratorRuntime.mark((function n(){var i,s,a,o,r,l,c,u,p,d,h,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=t.dispatch,s=t.commit,a=t.state,o=[],r=Object(Ne["a"])(e),n.prev=3,r.s();case 5:if((l=r.n()).done){n.next=21;break}c=l.value,u=a.root+c+"/",p={name:c},d=0,h=["phonology","phrasebook","converter"];case 10:if(!(d<h.length)){n.next=18;break}return f=h[d],n.next=14,i("loadJson",u+f+".json");case 14:p[f]=n.sent;case 15:d++,n.next=10;break;case 18:o.push(p);case 19:n.next=5;break;case 21:n.next=26;break;case 23:n.prev=23,n.t0=n["catch"](3),r.e(n.t0);case 26:return n.prev=26,r.f(),n.finish(26);case 29:return s("setState",["lects",o]),n.next=32,i("collectPhonemes");case 32:case"end":return n.stop()}}),n,null,[[3,23,26,29]])})))()},collectPhonemes:function(t){return Object(Pn["a"])(regeneratorRuntime.mark((function e(){var n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,i=t.state,s={},i.lects.forEach((function(t){t.phonology.forEach((function(e){var n=e.phoneme;n in s||(s[n]={ipa:n,tags:Sn(n,i.ipa),lects:{}}),s[n]["lects"][t.name]=e}))})),s=Object.values(s),s.sort((function(t,e){return t.ipa>e.ipa?1:e.ipa>t.ipa?-1:0})),n("setState",["phonemes",Object.values(s)]);case 6:case"end":return e.stop()}}),e)})))()},loadJson:function(t,e){return Object(Pn["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e).then((function(t){return t.json()}));case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t["catch"](0),t.abrupt("return");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},loadText:function(t,e){return Object(Pn["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e).then((function(t){return t.text()}));case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t["catch"](0),t.abrupt("return");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}});n("6cc5");i["a"].config.productionTip=!1,new i["a"]({router:wn,store:Bn,render:function(t){return t(C)}}).$mount("#app")},d0ad:function(t,e,n){},d1d7:function(t,e,n){},da7e:function(t,e,n){},dc87:function(t,e,n){"use strict";n("3476")},e338:function(t,e,n){},e38b:function(t,e,n){},eaf0:function(t,e,n){},f748:function(t,e,n){"use strict";n("9e5b")},fc91:function(t,e,n){"use strict";n("d1d7")}});
//# sourceMappingURL=app.3828f9fd.js.map